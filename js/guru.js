!function t(e,n,r){function o(a,s){if(!n[a]){if(!e[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(i)return i(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[a]={exports:{}};e[a][0].call(c.exports,function(t){var n=e[a][1][t];return o(n?n:t)},c,c.exports,t,e,n,r)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(t,e){var n={};n.controller=function(t,e){this.duration=t,this.seconds=m.prop(this.duration),this.startTime=null,this.completeCallback=e,this.stopped=m.prop(!0),this.reset=function(){this.seconds(this.duration),this.startTime=new Date,this.clearInterval()},this.start=function(){this.reset(),this.stopped(!1),this.timer=window.setInterval(this.update,100)}.bind(this),this.update=function(){var t=new Date,e=t-this.startTime,n=Math.ceil(this.duration-e/1e3);this.seconds(n),0>=n&&this.finished(),m.redraw()}.bind(this),this.finished=function(){this.stop(),this.completeCallback&&this.completeCallback()},this.stop=function(){this.seconds(0),this.stopped(!0),this.clearInterval()},this.clearInterval=function(){this.timer&&(window.clearInterval(this.timer),this.timer=null)}},n.view=function(t){{var e=[];t.stopped()}return e.push(m("div",t.seconds())),e},e.exports=n},{}],2:[function(t,e){Mithril=m=new function n(t,e){function r(){for(var t,e=arguments,n=(!(null==e[1]||"[object Object]"!=k.call(e[1])||"tag"in e[1]||"subtree"in e[1])),r=n?e[1]:{},o=("class"in r?"class":"className"),i={tag:"div",attrs:{}},a=[];t=O.exec(e[0]);)if(""==t[1])i.tag=t[2];else if("#"==t[1])i.attrs.id=t[2];else if("."==t[1])a.push(t[2]);else if("["==t[3][0]){var s=M.exec(t[3]);i.attrs[s[1]]=s[3]||(s[2]?"":!0)}a.length>0&&(i.attrs[o]=a.join(" ")),i.children=n?e[2]:e[1];for(var u in r)i.attrs[u]=u==o?(i.attrs[u]||"")+" "+r[u]:r[u];return i}function o(n,r,s,c,d,f,h,p,m,g,v){if(null==d&&(d=""),"retain"===d.subtree)return f;var y=k.call(f),w=k.call(d);if(null==f||y!=w){if(null!=f)if(s&&s.nodes){var x=p-c,b=x+("[object Array]"==w?d:f.nodes).length;a(s.nodes.slice(x,b),s.slice(x,b))}else f.nodes&&a(f.nodes,f);f=new d.constructor,f.nodes=[]}if("[object Array]"==w){d=l(d);for(var C=[],N=f.length===d.length,q=0,E=1,j=2,A=3,T={},O=[],M=!1,D=0;D<f.length;D++)f[D]&&f[D].attrs&&null!=f[D].attrs.key&&(M=!0,T[f[D].attrs.key]={action:E,index:D});if(M){for(var D=0;D<d.length;D++)if(d[D]&&d[D].attrs)if(null!=d[D].attrs.key){var B=d[D].attrs.key;T[B]=T[B]?{action:A,index:D,from:T[B].index,element:n.childNodes[T[B].index]}:{action:j,index:D}}else O.push({index:D,element:n.childNodes[D]});for(var L,R=Object.keys(T).map(function(t){return T[t]}),I=R.sort(function(t,e){return t.action-e.action||t.index-e.index}),Q=f.slice(),D=0;L=I[D];D++){if(L.action==E&&(a(f[L.index].nodes,f[L.index]),Q.splice(L.index,1)),L.action==j){var U=t.document.createElement("div");U.key=d[L.index].attrs.key,n.insertBefore(U,n.childNodes[L.index]),Q.splice(L.index,0,{attrs:{key:d[L.index].attrs.key},nodes:[U]})}L.action==A&&(n.childNodes[L.index]!==L.element&&null!==L.element&&n.insertBefore(L.element,n.childNodes[L.index]),Q[L.index]=f[L.from])}for(var D=0;D<O.length;D++){var L=O[D];n.insertBefore(L.element,n.childNodes[L.index]),Q[L.index]=f[L.index]}f=Q,f.nodes=[];for(var H,D=0;H=n.childNodes[D];D++)f.nodes.push(H)}for(var D=0,F=0;D<d.length;D++){var z=o(n,r,f,p,d[D],f[F],h,p+q||q,m,g,v);if(z!==e){z.nodes.intact||(N=!1);var G="[object Array]"==k.call(z);q+=G?z.length:1,f[F++]=z}}if(!N){for(var D=0;D<d.length;D++)null!=f[D]&&(C=C.concat(f[D].nodes));for(var P,D=0;P=f.nodes[D];D++)null!=P.parentNode&&C.indexOf(P)<0&&a([P],[f[D]]);for(var P,D=f.nodes.length;P=C[D];D++)null==P.parentNode&&n.appendChild(P);d.length<f.length&&(f.length=d.length),f.nodes=C}}else if(null!=d&&"[object Object]"==w){if((d.tag!=f.tag||Object.keys(d.attrs).join()!=Object.keys(f.attrs).join()||d.attrs.id!=f.attrs.id)&&(a(f.nodes),f.configContext&&"function"==typeof f.configContext.onunload&&f.configContext.onunload()),"string"!=typeof d.tag)return;var P,_=0===f.nodes.length;d.attrs.xmlns?g=d.attrs.xmlns:"svg"===d.tag?g="http://www.w3.org/2000/svg":"math"===d.tag&&(g="http://www.w3.org/1998/Math/MathML"),_?(P=g===e?t.document.createElement(d.tag):t.document.createElementNS(g,d.tag),f={tag:d.tag,children:o(P,d.tag,e,e,d.children,f.children,!0,0,d.attrs.contenteditable?P:m,g,v),attrs:i(P,d.tag,d.attrs,{},g),nodes:[P]},n.insertBefore(P,n.childNodes[p]||null)):(P=f.nodes[0],i(P,d.tag,d.attrs,f.attrs,g),f.children=o(P,d.tag,e,e,d.children,f.children,!1,0,d.attrs.contenteditable?P:m,g,v),f.nodes.intact=!0,h===!0&&null!=P&&n.insertBefore(P,n.childNodes[p]||null)),"function"==typeof d.attrs.config&&v.push(d.attrs.config.bind(t,P,!_,f.configContext=f.configContext||{},f))}else if("function"!=typeof w){var C;0===f.nodes.length?(d.$trusted?C=u(n,p,d):(C=[t.document.createTextNode(d)],n.nodeName.match(S)||n.insertBefore(C[0],n.childNodes[p]||null)),f="string number boolean".indexOf(typeof d)>-1?new d.constructor(d):d,f.nodes=C):f.valueOf()!==d.valueOf()||h===!0?(C=f.nodes,m&&m===t.document.activeElement||(d.$trusted?(a(C,f),C=u(n,p,d)):"textarea"===r?n.value=d:m?m.innerHTML=d:((1==C[0].nodeType||C.length>1)&&(a(f.nodes,f),C=[t.document.createTextNode(d)]),n.insertBefore(C[0],n.childNodes[p]||null),C[0].nodeValue=d)),f=new d.constructor(d),f.nodes=C):f.nodes.intact=!0}return f}function i(e,n,r,o,i){for(var a in r){var s=r[a],u=o[a];if(!(a in o)||u!==s||e===t.document.activeElement){if(o[a]=s,"config"===a)continue;if("function"==typeof s&&0==a.indexOf("on"))e[a]=c(s,e);else if("style"===a&&"object"==typeof s){for(var l in s)(null==u||u[l]!==s[l])&&(e.style[l]=s[l]);for(var l in u)l in s||(e.style[l]="")}else null!=i?"href"===a?e.setAttributeNS("http://www.w3.org/1999/xlink","href",s):"className"===a?e.setAttribute("class",s):e.setAttribute(a,s):"value"===a&&"input"===n?e.value!==s&&(e.value=s):a in e&&"list"!=a&&"style"!=a?e[a]=s:e.setAttribute(a,s)}}return o}function a(t,e){for(var n=t.length-1;n>-1;n--)t[n]&&t[n].parentNode&&(t[n].parentNode.removeChild(t[n]),e=[].concat(e),e[n]&&s(e[n]));0!=t.length&&(t.length=0)}function s(t){if(t.configContext&&"function"==typeof t.configContext.onunload&&t.configContext.onunload(),t.children)if("[object Array]"==k.call(t.children))for(var e=0;e<t.children.length;e++)s(t.children[e]);else t.children.tag&&s(t.children)}function u(e,n,r){var o=e.childNodes[n];if(o){var i=1!=o.nodeType,a=t.document.createElement("span");i?(e.insertBefore(a,o),a.insertAdjacentHTML("beforebegin",r),e.removeChild(a)):o.insertAdjacentHTML("beforebegin",r)}else e.insertAdjacentHTML("beforeend",r);for(var s=[];e.childNodes[n]!==o;)s.push(e.childNodes[n]),n++;return s}function l(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];"[object Array]"==k.call(r)?e.push.apply(e,l(r)):e.push(r)}return e}function c(t,e){return function(n){n=n||event,r.redraw.strategy("diff"),r.startComputation();try{return t.call(e,n)}finally{U||(U=-1),r.endComputation()}}}function d(t){var e=B.indexOf(t);return 0>e?B.push(t)-1:e}function f(t){var e=function(){return arguments.length&&(t=arguments[0]),t};return e.toJSON=function(){return t},e}function h(){for(var t=r.redraw.strategy(),e=0;e<R.length;e++)Q[e]&&"none"!=t&&r.render(R[e],I[e].view(Q[e]),"all"==t);H&&(H(),H=null),U=null,r.redraw.strategy("diff")}function p(t){return t.slice(G[r.route.mode].length)}function m(t,e,n){_={};var o=n.indexOf("?");-1!==o&&(_=w(n.substr(o+1,n.length)),n=n.substr(0,o));for(var i in e){if(i==n)return r.module(t,e[i]),!0;var a=new RegExp("^"+i.replace(/:[^\/]+?\.{3}/g,"(.*?)").replace(/:[^\/]+/g,"([^\\/]+)")+"/?$");if(a.test(n))return n.replace(a,function(){for(var n=i.match(/:[^\/]+/g)||[],o=[].slice.call(arguments,1,-2),a=0;a<n.length;a++)_[n[a].replace(/:|\./g,"")]=decodeURIComponent(o[a]);r.module(t,e[i])}),!0}}function g(t){t=t||event,t.ctrlKey||t.metaKey||2==t.which||(t.preventDefault(),r.route(t.currentTarget[r.route.mode].slice(G[r.route.mode].length)))}function v(){"hash"!=r.route.mode&&t.location.hash?t.location.hash=t.location.hash:t.scrollTo(0,0)}function y(t,e){var n=[];for(var r in t){var o=e?e+"["+r+"]":r,i=t[r];n.push("object"==typeof i?y(i,o):encodeURIComponent(o)+"="+encodeURIComponent(i))}return n.join("&")}function w(t){for(var e=t.split("&"),n={},r=0;r<e.length;r++){var o=e[r].split("=");n[x(o[0])]=o[1]?x(o[1]):1===o.length?!0:""}return n}function x(t){return decodeURIComponent(t.replace(/\+/g," "))}function b(t){var n=d(t);a(t.childNodes,L[n]),L[n]=e}function C(t,e){return t.then=function(){var t=r.prop();return C(t,e.then.apply(e,arguments).then(t))},t.promise=t,t.resolve=function(n){return t(n),e=e.resolve.apply(e,arguments),t},t.reject=function(){return e=e.reject.apply(e,arguments),t},t}function N(t,e){function n(t,e,n,r){if("object"!=typeof a&&"function"!=typeof a||"function"!=typeof t)r();else try{var o=0;t.call(a,function(t){o++||(a=t,e())},function(t){o++||(a=t,n())})}catch(i){a=i,n()}}function r(){var s;try{s=a&&a.then}catch(l){return a=l,i=2,r()}n(s,function(){i=1,r()},function(){i=2,r()},function(){try{1==i&&"function"==typeof t?a=t(a):2==i&&"function"==typeof e&&(a=e(a),i=1)}catch(r){return a=r,u()}a==o?(a=TypeError(),u()):n(s,function(){u(3)},u,function(){u(1==i&&3)})})}var o=this,i=0,a=0,s=[];o.promise=o,o.resolve=function(t){return i||(a=t,i=1,r()),this},o.reject=function(t){return i||(a=t,i=2,r()),this},o.then=function(t,e){var n=new N(t,e);return 3==i?n.resolve(a):4==i?n.reject(a):s.push(n),n};var u=function(t){i=t||4,s.map(function(t){3==i&&t.resolve(a)||t.reject(a)})}}function q(t){return t}function E(e){var n=new t.XMLHttpRequest;if(n.open(e.method,e.url,!0,e.user,e.password),n.onreadystatechange=function(){4===n.readyState&&(n.status>=200&&n.status<300?e.onload({type:"load",target:n}):e.onerror({type:"error",target:n}))},e.serialize==JSON.stringify&&"GET"!=e.method&&n.setRequestHeader("Content-Type","application/json; charset=utf-8"),"function"==typeof e.config){var r=e.config(n,e);null!=r&&(n=r)}return n.send("GET"==e.method?"":e.data),n}function j(t,e,n){return e&&Object.keys(e).length>0&&("GET"==t.method?t.url=t.url+(t.url.indexOf("?")<0?"?":"&")+y(e):t.data=n(e)),t}function A(t,e){var n=t.match(/:[a-z]\w+/gi);if(n&&e)for(var r=0;r<n.length;r++){var o=n[r].slice(1);t=t.replace(n[r],e[o]),delete e[o]}return t}var T,k={}.toString,O=/(?:(^|#|\.)([^#\.\[\]]+))|(\[.+?\])/g,M=/\[(.+?)(?:=("|'|)(.*?)\2)?\]/,S=/AREA|BASE|BR|COL|COMMAND|EMBED|HR|IMG|INPUT|KEYGEN|LINK|META|PARAM|SOURCE|TR‌​ACK|WBR/,D={insertAdjacentHTML:function(e,n){t.document.write(n),t.document.close()},appendChild:function(n){T===e&&(T=t.document.createElement("html")),"HTML"==n.nodeName?T=n:T.appendChild(n),t.document.documentElement&&t.document.documentElement!==T?t.document.replaceChild(T,t.document.documentElement):t.document.appendChild(T)},insertBefore:function(t){this.appendChild(t)},childNodes:[]},B=[],L={};r.render=function(n,r,i){var s=[];if(!n)throw new Error("Please ensure the DOM element exists before rendering a template into it.");var u=d(n),l=n==t.document||n==t.document.documentElement?D:n;L[u]===e&&a(l.childNodes),i===!0&&b(n),L[u]=o(l,null,e,e,r,L[u],!1,0,null,e,s);for(var c=0;c<s.length;c++)s[c]()},r.trust=function(t){return t=new String(t),t.$trusted=!0,t},r.prop=function(t){if(("object"==typeof t||"function"==typeof t)&&"function"==typeof t.then){var e=f();return C(e,t).then(e),e}return f(t)};var R=[],I=[],Q=[],U=0,H=null;r.module=function(t,e){var n=R.indexOf(t);0>n&&(n=R.length);var o=!1;if(Q[n]&&"function"==typeof Q[n].onunload){var i={preventDefault:function(){o=!0}};Q[n].onunload(i)}o||(r.redraw.strategy("all"),r.startComputation(),R[n]=t,I[n]=e,Q[n]=new e.controller,r.endComputation())},r.redraw=function(e){var n=t.cancelAnimationFrame||t.clearTimeout,r=t.requestAnimationFrame||t.setTimeout;U&&e!==!0?(n(U),U=r(h,0)):(h(),U=r(function(){U=null},0))},r.redraw.strategy=r.prop();var F=0;r.startComputation=function(){F++},r.endComputation=function(){F=Math.max(F-1,0),0==F&&r.redraw()},r.withAttr=function(t,e){return function(n){n=n||event;var r=n.currentTarget||this;e(t in r?r[t]:r.getAttribute(t))}};var z,G={pathname:"",hash:"#",search:"?"},P=function(){},_={};return r.route=function(){if(0===arguments.length)return z;if(3===arguments.length&&"string"==typeof arguments[1]){var e=arguments[0],n=arguments[1],o=arguments[2];P=function(t){var i=z=p(t);m(e,o,i)||r.route(n,!0)};var i="hash"==r.route.mode?"onhashchange":"onpopstate";t[i]=function(){z!=p(t.location[r.route.mode])&&P(t.location[r.route.mode])},H=v,t[i]()}else if(arguments[0].addEventListener){var a=arguments[0],s=arguments[1];a.href.indexOf(G[r.route.mode])<0&&(a.href=t.location.pathname+G[r.route.mode]+a.pathname),s||(a.removeEventListener("click",g),a.addEventListener("click",g))}else if("string"==typeof arguments[0]){z=arguments[0];var u="object"==typeof arguments[1]?y(arguments[1]):null;u&&(z+=(-1===z.indexOf("?")?"?":"&")+u);var l=(3==arguments.length?arguments[2]:arguments[1])===!0;t.history.pushState?(H=function(){t.history[l?"replaceState":"pushState"](null,t.document.title,G[r.route.mode]+z),v()},P(G[r.route.mode]+z)):t.location[r.route.mode]=z}},r.route.param=function(t){return _[t]},r.route.mode="search",r.deferred=function(){return C(r.prop(),new N)},r.sync=function(t){function e(t,e){return function(r){return a[t]=r,e||(n="reject"),0==--i&&(o.promise(a),o[n](a)),r}}var n="resolve",o=r.deferred(),i=t.length,a=new Array(i);if(t.length>0)for(var s=0;s<t.length;s++)t[s].then(e(s,!0),e(s,!1));else o.resolve();return o.promise},r.request=function(t){t.background!==!0&&r.startComputation();var e=r.deferred(),n=t.serialize=t.serialize||JSON.stringify,o=t.deserialize=t.deserialize||JSON.parse,i=t.extract||function(t){return 0===t.responseText.length&&o===JSON.parse?null:t.responseText};return t.url=A(t.url,t.data),t=j(t,t.data,n),t.onload=t.onerror=function(n){try{n=n||event;var a=("load"==n.type?t.unwrapSuccess:t.unwrapError)||q,s=a(o(i(n.target,t)));if("load"==n.type)if("[object Array]"==k.call(s)&&t.type)for(var u=0;u<s.length;u++)s[u]=new t.type(s[u]);else t.type&&(s=new t.type(s));e["load"==n.type?"resolve":"reject"](s)}catch(n){if(n instanceof SyntaxError)throw new SyntaxError("Could not parse HTTP response. See http://lhorie.github.io/mithril/mithril.request.html#using-variable-data-formats");if("[object Error]"==k.call(n)&&n.constructor!==Error)throw n;e.reject(n)}t.background!==!0&&r.endComputation()},E(t),e.promise},r.deps=function(e){return t=e},r.deps.factory=n,r}("undefined"!=typeof window?window:{}),"undefined"!=typeof e&&null!==e&&(e.exports=m),"function"==typeof define&&define.amd&&define(function(){return m})},{}],3:[function(t){var e=t("mithril"),n=t("./timer"),r=window.Data,o=r.strings,i={},a=window.applicationCache;i.Question=function(t){this.q=e.prop(t)},i.Questions=Array,i.Questions.prototype.shuffle=function(){var t,e,n=this.length;if(0==n)return this;for(;--n;)t=Math.floor(Math.random()*(n+1)),e=this[n],this[n]=this[t],this[t]=e;return this},i.controller=function(){function t(t){t.stopPropagation(),t.preventDefault()}function s(){u.updateAvailable(!0),e.redraw()}var u=this;u.questionData=new i.Questions,u.started=!1,u.questions=e.prop([]),u.question=e.prop(""),u.finishedMessage=e.prop(""),u.answers=e.prop(0),u.position=0,u.complete=e.prop(!1),u.updateAvailable=e.prop(!1),u.add=function(t){t&&u.questionData.push(new i.Question(t))},u.restart=function(n){t(n),this.complete(!1),this.question(""),this.position=0,e.redraw()}.bind(u),u.start=function(e){t(e),this.answers(0),this.questions(this.questionData.shuffle()),this.position=0,this.complete(!1),this.timer.start(),this.showQuestion()}.bind(u),u.showQuestion=function(){this.answers(this.answers()+1);var t=this.questions()[this.position];this.question(t.q())}.bind(u),u.nextQuestion=function(e){t(e),this.previousQuestion=this.question(),this.position+=1,this.position===this.questions().length?this.end(o.all_done):this.showQuestion()}.bind(u),u.timeUp=function(){this.end(o.times_up)}.bind(u),u.end=function(t){u.finishedMessage(t),u.timer.stop(),u.complete(!0)},u.stateClass=function(){if(u.complete())return["complete"];var t=!!u.question(),e=t?["active"]:["inactive"];return e.push("clock-"+u.questionClock()),e.join(" ")},u.questionClock=function(){var t;return t=0==arguments.length?u.position:arguments[0],t%3},u.questionForSlot=function(t){var e=u.questionClock(),n=u.questionClock(u.position-1);return t===e?u.question():t===n?u.previousQuestion:""},u.timer=new n.controller(60,u.timeUp),u.reload=function(e){t(e),window.location.reload()},a.addEventListener("updateready",s),a.status===a.UPDATEREADY&&s();for(var l=0,c=r.questions,d=c.length;d>l;l++)u.add(c[l])},i.view=function(t){var r=t.stateClass(),i=o.you_answered.split("{n}");return e("div",{"class":r},[e("h1#logo",[e("img",{src:"/img/guru-logo-neg.png",alt:"BAFTA Guru"})]),e("#timer",new n.view(t.timer)),e("#intro",[e("span",o.introduction)]),e("button#start",{ontouchend:t.start,onclick:t.start},o.start),e("button#restart",{ontouchend:t.restart,onclick:t.restart},o.try_again),e("div#question0.question",[e("span",t.questionForSlot(0))]),e("div#question1.question",[e("span",t.questionForSlot(1))]),e("div#question2.question",[e("span",t.questionForSlot(2))]),e("div#finished",t.finishedMessage()),e("div#results",[i[0],e("span",t.answers()),i[1]]),e("button#next",{onclick:t.nextQuestion,ontouchstart:t.nextQuestion},["Next question"]),e("div#abort",{ontouchstart:t.restart,onclick:t.restart},[e("img",{src:"/img/restart.png"})]),e("button#update",{onclick:t.reload,ontouchstart:t.reload,style:{display:t.updateAvailable()?"":"none"}},"Update available")])},e.module(document.getElementById("guru"),i),window.guru=i},{"./timer":1,mithril:2}]},{},[3]);