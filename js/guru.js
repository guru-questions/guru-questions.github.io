!function e(t,n,r){function o(a,s){if(!n[a]){if(!t[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(i)return i(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[a]={exports:{}};t[a][0].call(c.exports,function(e){var n=t[a][1][e];return o(n?n:e)},c,c.exports,e,t,n,r)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,t){var n={};n.controller=function(e,t){this.duration=e,this.seconds=m.prop(this.duration),this.startTime=null,this.completeCallback=t,this.stopped=m.prop(!0),this.reset=function(){this.seconds(this.duration),this.startTime=new Date,this.clearInterval()},this.start=function(){this.reset(),this.stopped(!1),this.timer=window.setInterval(this.update,100)}.bind(this),this.update=function(){var e=new Date,t=e-this.startTime,n=Math.ceil(this.duration-t/1e3);this.seconds(n),0>=n&&this.finished(),m.redraw()}.bind(this),this.finished=function(){this.stop(),this.completeCallback&&this.completeCallback()},this.stop=function(){this.seconds(0),this.stopped(!0),this.clearInterval()},this.clearInterval=function(){this.timer&&(window.clearInterval(this.timer),this.timer=null)}},n.view=function(e){{var t=[];e.stopped()}return t.push(m("div",e.seconds())),t},t.exports=n},{}],2:[function(e,t){Mithril=m=new function n(e,t){function r(){for(var e,t=arguments,n=(!(null==t[1]||"[object Object]"!=k.call(t[1])||"tag"in t[1]||"subtree"in t[1])),r=n?t[1]:{},o=("class"in r?"class":"className"),i={tag:"div",attrs:{}},a=[];e=O.exec(t[0]);)if(""==e[1])i.tag=e[2];else if("#"==e[1])i.attrs.id=e[2];else if("."==e[1])a.push(e[2]);else if("["==e[3][0]){var s=M.exec(e[3]);i.attrs[s[1]]=s[3]||(s[2]?"":!0)}a.length>0&&(i.attrs[o]=a.join(" ")),i.children=n?t[2]:t[1];for(var u in r)i.attrs[u]=u==o?(i.attrs[u]||"")+" "+r[u]:r[u];return i}function o(n,r,s,c,d,f,h,p,m,g,v){if(null==d&&(d=""),"retain"===d.subtree)return f;var y=k.call(f),w=k.call(d);if(null==f||y!=w){if(null!=f)if(s&&s.nodes){var x=p-c,b=x+("[object Array]"==w?d:f.nodes).length;a(s.nodes.slice(x,b),s.slice(x,b))}else f.nodes&&a(f.nodes,f);f=new d.constructor,f.nodes=[]}if("[object Array]"==w){d=l(d);for(var C=[],N=f.length===d.length,q=0,E=1,j=2,A=3,T={},O=[],M=!1,D=0;D<f.length;D++)f[D]&&f[D].attrs&&null!=f[D].attrs.key&&(M=!0,T[f[D].attrs.key]={action:E,index:D});if(M){for(var D=0;D<d.length;D++)if(d[D]&&d[D].attrs)if(null!=d[D].attrs.key){var B=d[D].attrs.key;T[B]=T[B]?{action:A,index:D,from:T[B].index,element:n.childNodes[T[B].index]}:{action:j,index:D}}else O.push({index:D,element:n.childNodes[D]});for(var L,R=Object.keys(T).map(function(e){return T[e]}),I=R.sort(function(e,t){return e.action-t.action||e.index-t.index}),Q=f.slice(),D=0;L=I[D];D++){if(L.action==E&&(a(f[L.index].nodes,f[L.index]),Q.splice(L.index,1)),L.action==j){var U=e.document.createElement("div");U.key=d[L.index].attrs.key,n.insertBefore(U,n.childNodes[L.index]),Q.splice(L.index,0,{attrs:{key:d[L.index].attrs.key},nodes:[U]})}L.action==A&&(n.childNodes[L.index]!==L.element&&null!==L.element&&n.insertBefore(L.element,n.childNodes[L.index]),Q[L.index]=f[L.from])}for(var D=0;D<O.length;D++){var L=O[D];n.insertBefore(L.element,n.childNodes[L.index]),Q[L.index]=f[L.index]}f=Q,f.nodes=[];for(var H,D=0;H=n.childNodes[D];D++)f.nodes.push(H)}for(var D=0,F=0;D<d.length;D++){var z=o(n,r,f,p,d[D],f[F],h,p+q||q,m,g,v);if(z!==t){z.nodes.intact||(N=!1);var G="[object Array]"==k.call(z);q+=G?z.length:1,f[F++]=z}}if(!N){for(var D=0;D<d.length;D++)null!=f[D]&&(C=C.concat(f[D].nodes));for(var P,D=0;P=f.nodes[D];D++)null!=P.parentNode&&C.indexOf(P)<0&&a([P],[f[D]]);for(var P,D=f.nodes.length;P=C[D];D++)null==P.parentNode&&n.appendChild(P);d.length<f.length&&(f.length=d.length),f.nodes=C}}else if(null!=d&&"[object Object]"==w){if((d.tag!=f.tag||Object.keys(d.attrs).join()!=Object.keys(f.attrs).join()||d.attrs.id!=f.attrs.id)&&(a(f.nodes),f.configContext&&"function"==typeof f.configContext.onunload&&f.configContext.onunload()),"string"!=typeof d.tag)return;var P,_=0===f.nodes.length;d.attrs.xmlns?g=d.attrs.xmlns:"svg"===d.tag?g="http://www.w3.org/2000/svg":"math"===d.tag&&(g="http://www.w3.org/1998/Math/MathML"),_?(P=g===t?e.document.createElement(d.tag):e.document.createElementNS(g,d.tag),f={tag:d.tag,children:o(P,d.tag,t,t,d.children,f.children,!0,0,d.attrs.contenteditable?P:m,g,v),attrs:i(P,d.tag,d.attrs,{},g),nodes:[P]},n.insertBefore(P,n.childNodes[p]||null)):(P=f.nodes[0],i(P,d.tag,d.attrs,f.attrs,g),f.children=o(P,d.tag,t,t,d.children,f.children,!1,0,d.attrs.contenteditable?P:m,g,v),f.nodes.intact=!0,h===!0&&null!=P&&n.insertBefore(P,n.childNodes[p]||null)),"function"==typeof d.attrs.config&&v.push(d.attrs.config.bind(e,P,!_,f.configContext=f.configContext||{},f))}else if("function"!=typeof w){var C;0===f.nodes.length?(d.$trusted?C=u(n,p,d):(C=[e.document.createTextNode(d)],n.nodeName.match(S)||n.insertBefore(C[0],n.childNodes[p]||null)),f="string number boolean".indexOf(typeof d)>-1?new d.constructor(d):d,f.nodes=C):f.valueOf()!==d.valueOf()||h===!0?(C=f.nodes,m&&m===e.document.activeElement||(d.$trusted?(a(C,f),C=u(n,p,d)):"textarea"===r?n.value=d:m?m.innerHTML=d:((1==C[0].nodeType||C.length>1)&&(a(f.nodes,f),C=[e.document.createTextNode(d)]),n.insertBefore(C[0],n.childNodes[p]||null),C[0].nodeValue=d)),f=new d.constructor(d),f.nodes=C):f.nodes.intact=!0}return f}function i(t,n,r,o,i){for(var a in r){var s=r[a],u=o[a];if(!(a in o)||u!==s||t===e.document.activeElement){if(o[a]=s,"config"===a)continue;if("function"==typeof s&&0==a.indexOf("on"))t[a]=c(s,t);else if("style"===a&&"object"==typeof s){for(var l in s)(null==u||u[l]!==s[l])&&(t.style[l]=s[l]);for(var l in u)l in s||(t.style[l]="")}else null!=i?"href"===a?t.setAttributeNS("http://www.w3.org/1999/xlink","href",s):"className"===a?t.setAttribute("class",s):t.setAttribute(a,s):"value"===a&&"input"===n?t.value!==s&&(t.value=s):a in t&&"list"!=a&&"style"!=a?t[a]=s:t.setAttribute(a,s)}}return o}function a(e,t){for(var n=e.length-1;n>-1;n--)e[n]&&e[n].parentNode&&(e[n].parentNode.removeChild(e[n]),t=[].concat(t),t[n]&&s(t[n]));0!=e.length&&(e.length=0)}function s(e){if(e.configContext&&"function"==typeof e.configContext.onunload&&e.configContext.onunload(),e.children)if("[object Array]"==k.call(e.children))for(var t=0;t<e.children.length;t++)s(e.children[t]);else e.children.tag&&s(e.children)}function u(t,n,r){var o=t.childNodes[n];if(o){var i=1!=o.nodeType,a=e.document.createElement("span");i?(t.insertBefore(a,o),a.insertAdjacentHTML("beforebegin",r),t.removeChild(a)):o.insertAdjacentHTML("beforebegin",r)}else t.insertAdjacentHTML("beforeend",r);for(var s=[];t.childNodes[n]!==o;)s.push(t.childNodes[n]),n++;return s}function l(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];"[object Array]"==k.call(r)?t.push.apply(t,l(r)):t.push(r)}return t}function c(e,t){return function(n){n=n||event,r.redraw.strategy("diff"),r.startComputation();try{return e.call(t,n)}finally{U||(U=-1),r.endComputation()}}}function d(e){var t=B.indexOf(e);return 0>t?B.push(e)-1:t}function f(e){var t=function(){return arguments.length&&(e=arguments[0]),e};return t.toJSON=function(){return e},t}function h(){for(var e=r.redraw.strategy(),t=0;t<R.length;t++)Q[t]&&"none"!=e&&r.render(R[t],I[t].view(Q[t]),"all"==e);H&&(H(),H=null),U=null,r.redraw.strategy("diff")}function p(e){return e.slice(G[r.route.mode].length)}function m(e,t,n){_={};var o=n.indexOf("?");-1!==o&&(_=w(n.substr(o+1,n.length)),n=n.substr(0,o));for(var i in t){if(i==n)return r.module(e,t[i]),!0;var a=new RegExp("^"+i.replace(/:[^\/]+?\.{3}/g,"(.*?)").replace(/:[^\/]+/g,"([^\\/]+)")+"/?$");if(a.test(n))return n.replace(a,function(){for(var n=i.match(/:[^\/]+/g)||[],o=[].slice.call(arguments,1,-2),a=0;a<n.length;a++)_[n[a].replace(/:|\./g,"")]=decodeURIComponent(o[a]);r.module(e,t[i])}),!0}}function g(e){e=e||event,e.ctrlKey||e.metaKey||2==e.which||(e.preventDefault(),r.route(e.currentTarget[r.route.mode].slice(G[r.route.mode].length)))}function v(){"hash"!=r.route.mode&&e.location.hash?e.location.hash=e.location.hash:e.scrollTo(0,0)}function y(e,t){var n=[];for(var r in e){var o=t?t+"["+r+"]":r,i=e[r];n.push("object"==typeof i?y(i,o):encodeURIComponent(o)+"="+encodeURIComponent(i))}return n.join("&")}function w(e){for(var t=e.split("&"),n={},r=0;r<t.length;r++){var o=t[r].split("=");n[x(o[0])]=o[1]?x(o[1]):1===o.length?!0:""}return n}function x(e){return decodeURIComponent(e.replace(/\+/g," "))}function b(e){var n=d(e);a(e.childNodes,L[n]),L[n]=t}function C(e,t){return e.then=function(){var e=r.prop();return C(e,t.then.apply(t,arguments).then(e))},e.promise=e,e.resolve=function(n){return e(n),t=t.resolve.apply(t,arguments),e},e.reject=function(){return t=t.reject.apply(t,arguments),e},e}function N(e,t){function n(e,t,n,r){if("object"!=typeof a&&"function"!=typeof a||"function"!=typeof e)r();else try{var o=0;e.call(a,function(e){o++||(a=e,t())},function(e){o++||(a=e,n())})}catch(i){a=i,n()}}function r(){var s;try{s=a&&a.then}catch(l){return a=l,i=2,r()}n(s,function(){i=1,r()},function(){i=2,r()},function(){try{1==i&&"function"==typeof e?a=e(a):2==i&&"function"==typeof t&&(a=t(a),i=1)}catch(r){return a=r,u()}a==o?(a=TypeError(),u()):n(s,function(){u(3)},u,function(){u(1==i&&3)})})}var o=this,i=0,a=0,s=[];o.promise=o,o.resolve=function(e){return i||(a=e,i=1,r()),this},o.reject=function(e){return i||(a=e,i=2,r()),this},o.then=function(e,t){var n=new N(e,t);return 3==i?n.resolve(a):4==i?n.reject(a):s.push(n),n};var u=function(e){i=e||4,s.map(function(e){3==i&&e.resolve(a)||e.reject(a)})}}function q(e){return e}function E(t){var n=new e.XMLHttpRequest;if(n.open(t.method,t.url,!0,t.user,t.password),n.onreadystatechange=function(){4===n.readyState&&(n.status>=200&&n.status<300?t.onload({type:"load",target:n}):t.onerror({type:"error",target:n}))},t.serialize==JSON.stringify&&"GET"!=t.method&&n.setRequestHeader("Content-Type","application/json; charset=utf-8"),"function"==typeof t.config){var r=t.config(n,t);null!=r&&(n=r)}return n.send("GET"==t.method?"":t.data),n}function j(e,t,n){return t&&Object.keys(t).length>0&&("GET"==e.method?e.url=e.url+(e.url.indexOf("?")<0?"?":"&")+y(t):e.data=n(t)),e}function A(e,t){var n=e.match(/:[a-z]\w+/gi);if(n&&t)for(var r=0;r<n.length;r++){var o=n[r].slice(1);e=e.replace(n[r],t[o]),delete t[o]}return e}var T,k={}.toString,O=/(?:(^|#|\.)([^#\.\[\]]+))|(\[.+?\])/g,M=/\[(.+?)(?:=("|'|)(.*?)\2)?\]/,S=/AREA|BASE|BR|COL|COMMAND|EMBED|HR|IMG|INPUT|KEYGEN|LINK|META|PARAM|SOURCE|TR‌​ACK|WBR/,D={insertAdjacentHTML:function(t,n){e.document.write(n),e.document.close()},appendChild:function(n){T===t&&(T=e.document.createElement("html")),"HTML"==n.nodeName?T=n:T.appendChild(n),e.document.documentElement&&e.document.documentElement!==T?e.document.replaceChild(T,e.document.documentElement):e.document.appendChild(T)},insertBefore:function(e){this.appendChild(e)},childNodes:[]},B=[],L={};r.render=function(n,r,i){var s=[];if(!n)throw new Error("Please ensure the DOM element exists before rendering a template into it.");var u=d(n),l=n==e.document||n==e.document.documentElement?D:n;L[u]===t&&a(l.childNodes),i===!0&&b(n),L[u]=o(l,null,t,t,r,L[u],!1,0,null,t,s);for(var c=0;c<s.length;c++)s[c]()},r.trust=function(e){return e=new String(e),e.$trusted=!0,e},r.prop=function(e){if(("object"==typeof e||"function"==typeof e)&&"function"==typeof e.then){var t=f();return C(t,e).then(t),t}return f(e)};var R=[],I=[],Q=[],U=0,H=null;r.module=function(e,t){var n=R.indexOf(e);0>n&&(n=R.length);var o=!1;if(Q[n]&&"function"==typeof Q[n].onunload){var i={preventDefault:function(){o=!0}};Q[n].onunload(i)}o||(r.redraw.strategy("all"),r.startComputation(),R[n]=e,I[n]=t,Q[n]=new t.controller,r.endComputation())},r.redraw=function(t){var n=e.cancelAnimationFrame||e.clearTimeout,r=e.requestAnimationFrame||e.setTimeout;U&&t!==!0?(n(U),U=r(h,0)):(h(),U=r(function(){U=null},0))},r.redraw.strategy=r.prop();var F=0;r.startComputation=function(){F++},r.endComputation=function(){F=Math.max(F-1,0),0==F&&r.redraw()},r.withAttr=function(e,t){return function(n){n=n||event;var r=n.currentTarget||this;t(e in r?r[e]:r.getAttribute(e))}};var z,G={pathname:"",hash:"#",search:"?"},P=function(){},_={};return r.route=function(){if(0===arguments.length)return z;if(3===arguments.length&&"string"==typeof arguments[1]){var t=arguments[0],n=arguments[1],o=arguments[2];P=function(e){var i=z=p(e);m(t,o,i)||r.route(n,!0)};var i="hash"==r.route.mode?"onhashchange":"onpopstate";e[i]=function(){z!=p(e.location[r.route.mode])&&P(e.location[r.route.mode])},H=v,e[i]()}else if(arguments[0].addEventListener){var a=arguments[0],s=arguments[1];a.href.indexOf(G[r.route.mode])<0&&(a.href=e.location.pathname+G[r.route.mode]+a.pathname),s||(a.removeEventListener("click",g),a.addEventListener("click",g))}else if("string"==typeof arguments[0]){z=arguments[0];var u="object"==typeof arguments[1]?y(arguments[1]):null;u&&(z+=(-1===z.indexOf("?")?"?":"&")+u);var l=(3==arguments.length?arguments[2]:arguments[1])===!0;e.history.pushState?(H=function(){e.history[l?"replaceState":"pushState"](null,e.document.title,G[r.route.mode]+z),v()},P(G[r.route.mode]+z)):e.location[r.route.mode]=z}},r.route.param=function(e){return _[e]},r.route.mode="search",r.deferred=function(){return C(r.prop(),new N)},r.sync=function(e){function t(e,t){return function(r){return a[e]=r,t||(n="reject"),0==--i&&(o.promise(a),o[n](a)),r}}var n="resolve",o=r.deferred(),i=e.length,a=new Array(i);if(e.length>0)for(var s=0;s<e.length;s++)e[s].then(t(s,!0),t(s,!1));else o.resolve();return o.promise},r.request=function(e){e.background!==!0&&r.startComputation();var t=r.deferred(),n=e.serialize=e.serialize||JSON.stringify,o=e.deserialize=e.deserialize||JSON.parse,i=e.extract||function(e){return 0===e.responseText.length&&o===JSON.parse?null:e.responseText};return e.url=A(e.url,e.data),e=j(e,e.data,n),e.onload=e.onerror=function(n){try{n=n||event;var a=("load"==n.type?e.unwrapSuccess:e.unwrapError)||q,s=a(o(i(n.target,e)));if("load"==n.type)if("[object Array]"==k.call(s)&&e.type)for(var u=0;u<s.length;u++)s[u]=new e.type(s[u]);else e.type&&(s=new e.type(s));t["load"==n.type?"resolve":"reject"](s)}catch(n){if(n instanceof SyntaxError)throw new SyntaxError("Could not parse HTTP response. See http://lhorie.github.io/mithril/mithril.request.html#using-variable-data-formats");if("[object Error]"==k.call(n)&&n.constructor!==Error)throw n;t.reject(n)}e.background!==!0&&r.endComputation()},E(e),t.promise},r.deps=function(t){return e=t},r.deps.factory=n,r}("undefined"!=typeof window?window:{}),"undefined"!=typeof t&&null!==t&&(t.exports=m),"function"==typeof define&&define.amd&&define(function(){return m})},{}],3:[function(e){var t=e("mithril"),n=e("./timer"),r=window.Data,o=r.strings,i={},a=window.applicationCache;i.Question=function(e){this.q=t.prop(e)},i.Questions=Array,i.Questions.prototype.shuffle=function(){var e,t,n=this.length;if(0==n)return this;for(;--n;)e=Math.floor(Math.random()*(n+1)),t=this[n],this[n]=this[e],this[e]=t;return this},i.controller=function(){function e(e){e.stopPropagation(),e.preventDefault()}function s(){u.updateAvailable(!0),t.redraw()}var u=this;u.questionData=new i.Questions,u.started=!1,u.questions=t.prop([]),u.question=t.prop(""),u.finishedMessage=t.prop(""),u.answers=t.prop(0),u.position=0,u.complete=t.prop(!1),u.updateAvailable=t.prop(!1),u.add=function(e){e&&u.questionData.push(new i.Question(e))},u.start=function(t){e(t),this.answers(0),this.questions(this.questionData.shuffle()),this.position=0,this.complete(!1),this.timer.start(),this.showQuestion()}.bind(u),u.showQuestion=function(){this.answers(this.answers()+1);var e=this.questions()[this.position];this.question(e.q())}.bind(u),u.nextQuestion=function(t){e(t),this.previousQuestion=this.question(),this.position+=1,this.position===this.questions().length?this.end(o.all_done):this.showQuestion()}.bind(u),u.timeUp=function(){this.end(o.times_up)}.bind(u),u.end=function(e){u.finishedMessage(e),u.timer.stop(),u.complete(!0)},u.stateClass=function(){if(u.complete())return["complete"];var e=!!u.question(),t=e?["active"]:["inactive"];return t.push("clock-"+u.questionClock()),t.join(" ")},u.questionClock=function(){var e;return e=0==arguments.length?u.position:arguments[0],e%3},u.questionForSlot=function(e){var t=u.questionClock(),n=u.questionClock(u.position-1);return e===t?u.question():e===n?u.previousQuestion:""},u.timer=new n.controller(60,u.timeUp),u.reload=function(t){e(t),window.location.reload()},a.addEventListener("updateready",s),a.status===a.UPDATEREADY&&s();for(var l=0,c=r.questions,d=c.length;d>l;l++)u.add(c[l])},i.view=function(e){var r=e.stateClass(),i=o.you_answered.split("{n}");return t("div",{"class":r},[t("h1#logo",[t("img",{src:"/img/guru-logo-neg.png",alt:"BAFTA Guru"})]),t("#timer",new n.view(e.timer)),t("#intro",o.introduction),t("button#start",{ontouchend:e.start,onclick:e.start},o.start),t("button#restart",{ontouchend:e.start,onclick:e.start},o.try_again),t("div#question0.question",[t("span",e.questionForSlot(0))]),t("div#question1.question",[t("span",e.questionForSlot(1))]),t("div#question2.question",[t("span",e.questionForSlot(2))]),t("div#finished",e.finishedMessage()),t("div#results",[i[0],t("span",e.answers()),i[1]]),t("button#next",{onclick:e.nextQuestion,ontouchstart:e.nextQuestion},["Next question"]),t("button#update",{onclick:e.reload,ontouchstart:e.reload,style:{display:e.updateAvailable()?"":"none"}},"Update available")])},t.module(document.getElementById("guru"),i),window.guru=i},{"./timer":1,mithril:2}]},{},[3]);